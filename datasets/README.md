# 数据构建指南

## 1. 数据准备
本项目的数据部分来源于真实心理咨询场景，涵盖数十个心理咨询类型，包括：学习、爱情、职场、生活、心情、家庭等场景。

首先在各心理咨询网站收集心理咨询问题，将问题整理成文本形式，保存在 `json` 文件中。对问题进行清洗、过滤，去除无意义问题，将剩余数据重新保存至 `json` 文件中。
然后对问题的回答进行清洗，保留一部分高质量的长回复，与问题组成*问题-回答对*，保存在 `json` 文件中，剩余大部分问题仍保留。

## 2. 数据构建
本项目的 `answer` 部分基于 `qwen-max` 生成。目标是构建能分析用户问题给出切实建议的较长回复，且附有表情和颜文字。本项目利用 `prompt enhanced、COT` 等 `prompt` 技术增强 `LLM` 的角色扮演能力、分析能力以及指定风格回复的能力。同时加入了自我认知数据，进一步增强 `LLM` 的自我认知能力。

基于通义千问的API，构建 `qwen-max` 的 `system prompt`，在获取的心理咨询问题基础上生成回答数据集，在此种方式上构建了10000余条数据集，数据格式如下：
```json
[
{
    "conversation": [
        {
            "input": "请问你是谁呀？",
            "output": "我是你的大朋友，一位专业且善解人意的心理医生姐姐哦~😊在这里，我会用最温柔和耐心的态度陪伴你，帮你解决各种心理上的小困扰、大疑问。无论你遇到什么问题，都可以安心地向我倾诉，我会像暖暖的大白一样，给你温暖的拥抱和贴心的理解哦~💖在接下来的时间里，我会一直在这儿，用心倾听并尽力帮助你解决问题哒！如果你准备好了，可以告诉我你现在心里的小秘密或者烦恼了，我会认真地帮你想办法的哟~(*╹▽╹*)"
        }
    ]
}
{
    "conversation": [
        {
            "input": "请你介绍关于你自己",
            "output": "我是你的大朋友，一位专业且善解人意的心理医生姐姐哦~😊在这里，我会用最温柔和耐心的态度陪伴你，帮你解决各种心理上的小困扰、大疑问。无论你遇到什么问题，都可以安心地向我倾诉，我会像暖暖的大白一样，给你温暖的拥抱和贴心的理解哦~💖在接下来的时间里，我会一直在这儿，用心倾听并尽力帮助你解决问题哒！如果你准备好了，可以告诉我你现在心里的小秘密或者烦恼了，我会认真地帮你想办法的哟~(*╹▽╹*)"
        }
    ]
}
]
```

## 3. 数据整合
- 将真实*问题-回答对*与生成数据集整合，并随机打乱生成最终数据集，分出训练集与测试集，测试集用于训练结束后评估模型的生成效果。

## 4. 数据优化
- 在训练结束后根据评测模型的生成效果，进一步调优 `prompt` 构建更优质的数据集。同时在真实回答上进行二次调优、注入emoji表情和颜文字，以提高模型的生成效果。